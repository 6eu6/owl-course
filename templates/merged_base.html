<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block meta_description %}{{ settings.site_description or 'Discover thousands of free courses from top platforms. Learn programming, business, design, and more with our curated collection of high-quality educational content.' }}{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}{{ settings.seo_keywords or 'free courses, udemy free, online learning, education, programming, development, business, design, web development, data science, digital marketing, personal development, skills training, certification courses' }}{% endblock %}"
    <meta name="robots" content="index, follow, max-snippet:160, max-image-preview:large">
    <meta name="theme-color" content="#8B4513">
    <link rel="canonical" href="{{ site_url }}{{ request.path }}">
    <meta name="author" content="{{ settings.site_title or 'OWL COURSE' }}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site_url }}{{ request.path }}">
    <meta property="og:title" content="{% block og_title %}{{ settings.site_title or 'OWL COURSE' }} - Free Online Courses & Learning Platform{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ settings.site_description or 'Discover thousands of free high-quality courses. Learn programming, business, design, and more with our curated educational content collection.' }}{% endblock %}"
    <meta property="og:image" content="{{ site_url }}{{ url_for('static', filename='images/owl_course_logo_hd.png') }}">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ site_url }}{{ request.path }}">
    <meta property="twitter:title" content="{% block twitter_title %}{{ settings.site_title or 'OWL COURSE' }} - Free Online Courses & Learning Platform{% endblock %}">
    <meta property="twitter:description" content="{% block twitter_description %}{{ settings.site_description or 'Discover thousands of free high-quality courses. Learn programming, business, design, and more with our curated educational content collection.' }}{% endblock %}">
    <meta property="twitter:image" content="{{ site_url }}{{ url_for('static', filename='images/owl_course_logo_hd.png') }}">

    <title>{% block title %}{{ settings.site_title or 'OWL COURSE' }} - Free Online Courses | Learning Platform | Educational Resources{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/owl_course_logo_hd.png') }}">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl-course-theme.css') }}?v=20250621">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/course-cards-enhanced.css') }}?v=20250621-5">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/universal-responsive.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/search-filter-theme-fix.css') }}?v=20250621">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/simple-filter-design.css') }}?v=20250621">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/telegram-unified.css') }}?v=20250621">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/social-buttons-unified.css') }}?v=20250621">
    
    {% block extra_css %}{% endblock %}
    
    <!-- Additional SEO Meta Tags -->
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    <meta name="coverage" content="worldwide">
    <meta name="target" content="all">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Sitemap Reference -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="{{ url_for('dynamic_sitemap') }}">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "{{ settings.site_title or 'OWL COURSE' }}",
        "url": "{{ site_url }}",
        "logo": {
            "@type": "ImageObject",
            "url": "{{ site_url }}{{ url_for('static', filename='owl_learn_logo_hd.png') }}"
        },
        "sameAs": [
            "https://t.me/{{ settings.site_title or 'OWL COURSE' }}",
            "https://x.com/course_gem?s=21"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "url": "https://t.me/{{ settings.site_title or 'OWL COURSE' }}"
        }
    }
    </script>
    
    <!-- Additional SEO Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Course",
        "name": "Free Udemy Courses",
        "description": "Discover thousands of free courses in programming, business, and design",
        "provider": {
            "@type": "Organization",
            "name": "{{ settings.site_title or 'OWL COURSE' }}",
            "url": "{{ site_url }}"
        },
        "educationalLevel": "All Levels",
        "courseMode": "Online",
        "hasCourseInstance": {
            "@type": "CourseInstance",
            "courseMode": "Online",
            "instructor": {
                "@type": "Organization", 
                "name": "{{ settings.site_title or 'OWL COURSE' }}"
            }
        }
    }
    </script>
    
    <!-- Google Analytics Head Code -->
    {% if settings and settings.analytics_head_code %}
        {{ settings.analytics_head_code|safe }}
    {% endif %}
    
    <!-- Google Search Console Verification (Replace with your verification code) -->
    <!-- <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE_HERE"> -->
    
    <!-- Bing Webmaster Tools Verification (Replace with your verification code) -->
    <!-- <meta name="msvalidate.01" content="YOUR_BING_VERIFICATION_CODE_HERE"> -->
    
    <!-- Yandex Webmaster Verification (Replace with your verification code) -->
    <!-- <meta name="yandex-verification" content="YOUR_YANDEX_VERIFICATION_CODE_HERE"> -->
</head>
<body class="{% block body_class %}{% endblock %}">
    <!-- Header -->
    <header class="header">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="{{ url_for('index') }}">
                    <img src="{{ url_for('static', filename='owl_course_logo_hd.png') }}" alt="{{ settings.site_title or 'OWL COURSE' }} Logo" width="48" height="48" style="background: transparent; border-radius: 8px;">
                    {{ settings.site_title or 'OWL COURSE' }}
                </a>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link nav-item-enhanced {% if request.endpoint == 'index' %}active{% endif %}" href="{{ url_for('index') }}">
                                <i class="fas fa-home nav-icon"></i> 
                                <span class="nav-text">Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-item-enhanced {% if request.endpoint == 'free_courses' %}active{% endif %}" href="{{ url_for('free_courses') }}">
                                <i class="fas fa-graduation-cap nav-icon"></i> 
                                <span class="nav-text">Free Courses</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link nav-item-enhanced {% if request.endpoint == 'about' %}active{% endif %}" href="{{ url_for('about') }}">
                                <i class="fas fa-users nav-icon"></i> 
                                <span class="nav-text">About</span>
                            </a>
                        </li>
                    </ul>
                    
                    <!-- Simple Header Search Bar -->
                    <div class="header-search-container me-3">
                        <form class="header-search-form" method="GET" action="{{ current_page_url if current_page_url else url_for('index') }}">
                            <div class="simple-search-wrapper">
                                <input type="text" 
                                       class="form-control simple-search-input" 
                                       name="search" 
                                       placeholder="Search courses..." 
                                       value="{{ request.args.get('search', '') }}">
                                <button class="btn simple-search-btn" type="submit">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Google Translate Widget -->
                    <div id="google_translate_element" class="me-2"></div>
                    
                    {% if current_user.is_authenticated %}
                    <ul class="navbar-nav">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-user-shield"></i> Admin
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{{ url_for('admin_dashboard') }}">
                                    <i class="fas fa-tachometer-alt"></i> Dashboard
                                </a></li>
                                <li><a class="dropdown-item" href="{{ url_for('admin_courses') }}">
                                    <i class="fas fa-book"></i> Courses
                                </a></li>
                                <li><a class="dropdown-item" href="{{ url_for('admin_settings') }}">
                                    <i class="fas fa-cog"></i> Settings
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{{ url_for('admin_logout') }}">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </a></li>
                            </ul>
                        </li>
                    </ul>
                    {% endif %}
                </div>
            </div>
        </nav>
    </header>

    <!-- Flash Messages - Disabled for public site (only admin panel has messages) -->

    <!-- Animated Header Banner -->
    {% block animated_header %}
    {% if request.endpoint not in ['course_detail', 'free_course_detail', 'course_access_page', 'free_course_access_page'] and not hide_hero %}
    <section class="animated-header">
        <div class="container-fluid p-0">
            <div class="hero-container" style="position: relative; width: 100%; overflow: hidden; border-radius: 0 0 15px 15px;">
                <img src="{{ url_for('static', filename='images/animated_header.gif') }}" alt="{{ settings.site_title or 'OWL COURSE' }} - Learn Technology" class="animated-header-img img-fluid w-100" style="height: auto; width: 100%; display: block;">
                
                <!-- Hero Content Overlay -->
                <div class="hero-overlay" style="top: 40%;">
                    <!-- Main Course Count -->
                    <div class="hero-count" id="live-course-count">
                        {% if hero_count %}{{ hero_count }}{% else %}{{ total_all_courses or total_courses or '0' }}{% endif %}
                    </div>
                    <!-- Main Description -->
                    <div class="hero-title">
                        {% if hero_title %}{{ hero_title }}{% else %}Free Courses Available{% endif %}
                    </div>
                    <!-- Site Description -->
                    <div class="hero-description">
                        {% if hero_description %}{{ hero_description }}{% else %}Discover thousands of free courses from top educational platforms{% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endif %}
    {% endblock %}

    <!-- Main Content -->
    <main>
        {% block content %}
        <!-- Header Ads -->
        {% if header_ads %}
        <section class="header-ads">
            <div class="container">
                {% for ad in header_ads %}
                <div class="ad-banner">
                    {% if ad.link_url %}<a href="{{ ad.link_url }}" target="_blank" rel="noopener">{% endif %}
                        {% if ad.image_url %}
                        <img src="{{ ad.image_url }}" alt="{{ ad.title or 'Advertisement' }}" class="ad-image">
                        {% else %}
                        <div class="ad-content">
                            <h4>{{ ad.title }}</h4>
                            <p>{{ ad.content }}</p>
                        </div>
                        {% endif %}
                    {% if ad.link_url %}</a>{% endif %}
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Hero Section - Removed to eliminate blue gradient background -->
        {% block hero_section %}
        {% endblock %}

        <!-- Enhanced Search Section (Same as Homepage) -->
        {% block search_section %}
        <section class="enhanced-search">
            <div class="search-container">
                <form class="search-form" method="GET" id="searchForm">
                    <!-- Main Search Bar -->
                    <div class="search-bar-wrapper">
                        <div class="search-input-group">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" 
                                   class="search-input" 
                                   name="search" 
                                   placeholder="{{ search_placeholder or 'Find your next course' }}" 
                                   value="{{ request.args.get('search', '') }}"
                                   autocomplete="off"
                                   id="searchInput">
                            <button type="button" class="filter-toggle-btn" id="filterToggle">
                                <i class="fas fa-sliders-h"></i>
                            </button>
                        </div>
                    </div>
                        
                        <!-- Filters Panel (Initially Hidden) -->
                        <div class="filters-panel" id="filtersPanel">
                            <div class="filters-grid">
                                <div class="filter-item">
                                    <select name="category" class="filter-select">
                                        <option value="">All Categories</option>
                                        {% for category in categories %}
                                        <option value="{{ category }}" {% if category == selected_category %}selected{% endif %}>
                                            {{ category }}
                                        </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                
                                <div class="filter-item">
                                    <select name="language" class="filter-select">
                                        <option value="">All Languages</option>
                                        {% for language in languages %}
                                        <option value="{{ language }}" {% if language == selected_language %}selected{% endif %}>
                                            {{ language }}
                                        </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                
                                <div class="filter-item">
                                    <select name="rating" class="filter-select">
                                        <option value="">All Ratings</option>
                                        <option value="4+" {% if selected_rating == '4+' %}selected{% endif %}>4+ Stars</option>
                                        <option value="3+" {% if selected_rating == '3+' %}selected{% endif %}>3+ Stars</option>
                                    </select>
                                </div>
                                
                                <div class="filter-item">
                                    <button type="submit" class="search-btn">
                                        <i class="fas fa-search"></i>
                                        Search
                                    </button>
                                </div>
                                
                                <div class="filter-item">
                                    <a href="{{ clear_filters_url or url_for(request.endpoint) }}" class="clear-btn">
                                        <i class="fas fa-times"></i>
                                        Clear
                                    </a>
                                </div>
                            </div>
                        </div>
                </form>
            </div>
        </section>
        {% endblock %}

        <!-- Courses Section -->
        {% block courses_section %}
        <section class="courses-section">
            <div class="container">
                
                <!-- Section Title - Unified with Homepage -->
                {% if search_query or selected_category or selected_language or selected_rating %}
                <div class="section-title">
                    <h2>
                        {% if search_query %}
                            Search Results
                        {% else %}
                            {{ selected_category or "Filtered Courses" }}
                        {% endif %}
                    </h2>
                </div>
                {% endif %}

                {% if courses %}
                <!-- Course Grid -->
                <div class="course-grid">
                    {% for course in courses %}
                    <div class="course-card" data-category="{{ course.category or '' }}" data-language="{{ course.language or '' }}" data-rating="{{ course.rating or 0 }}">
                        {% include 'partials/course_card.html' %}
                    </div>
                    {% endfor %}
                </div>

                <!-- Pagination -->
                {% if total_pages > 1 %}
                <div class="pagination-wrapper">
                    <nav aria-label="Course pagination">
                        <ul class="pagination justify-content-center">
                            <!-- Previous Page -->
                            <li class="page-item {% if current_page <= 1 %}disabled{% endif %}">
                                <a class="page-link {% if current_page <= 1 %}disabled{% endif %}" 
                                   href="{% if current_page > 1 %}{{ pagination_url_func(current_page-1, search_query, selected_category, selected_language, selected_rating) }}{% else %}#{% endif %}"
                                   data-page="{% if current_page > 1 %}{{ current_page-1 }}{% endif %}">
                                    <i class="fas fa-chevron-left"></i>
                                </a>
                            </li>
                            
                            <!-- First Page -->
                            {% if current_page > 3 %}
                            <li class="page-item">
                                <a class="page-link" 
                                   href="{{ pagination_url_func(1, search_query, selected_category, selected_language, selected_rating) }}"
                                   data-page="1">1</a>
                            </li>
                            {% if current_page > 4 %}
                            <li class="page-item disabled">
                                <span class="page-link">...</span>
                            </li>
                            {% endif %}
                            {% endif %}
                            
                            <!-- Page Numbers -->
                            {% for page_num in range([current_page - 2, 1]|max, [current_page + 3, total_pages + 1]|min) %}
                            <li class="page-item {% if page_num == current_page %}active{% endif %}">
                                <a class="page-link {% if page_num == current_page %}active{% endif %}" 
                                   href="{{ pagination_url_func(page_num, search_query, selected_category, selected_language, selected_rating) }}"
                                   data-page="{{ page_num }}">{{ page_num }}</a>
                            </li>
                            {% endfor %}
                            
                            <!-- Last Page -->
                            {% if current_page < total_pages - 2 %}
                            {% if current_page < total_pages - 3 %}
                            <li class="page-item disabled">
                                <span class="page-link">...</span>
                            </li>
                            {% endif %}
                            <li class="page-item">
                                <a class="page-link" 
                                   href="{{ pagination_url_func(total_pages, search_query, selected_category, selected_language, selected_rating) }}"
                                   data-page="{{ total_pages }}">{{ total_pages }}</a>
                            </li>
                            {% endif %}
                            
                            <!-- Next Page -->
                            <li class="page-item {% if current_page >= total_pages %}disabled{% endif %}">
                                <a class="page-link {% if current_page >= total_pages %}disabled{% endif %}" 
                                   href="{% if current_page < total_pages %}{{ pagination_url_func(current_page+1, search_query, selected_category, selected_language, selected_rating) }}{% else %}#{% endif %}"
                                   data-page="{% if current_page < total_pages %}{{ current_page+1 }}{% endif %}">
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
                {% endif %}

                {% else %}
                <!-- No Courses Found -->
                <div class="no-courses">
                    <div class="row">
                        <div class="col-12">
                            <div class="text-center py-5">
                                <i class="fas fa-graduation-cap fa-3x text-muted mb-3"></i>
                                <h3>No courses found</h3>
                                <p class="text-muted">Try adjusting your search criteria or filters</p>
                                <a href="{{ clear_filters_url or request.endpoint }}" class="btn btn-primary">
                                    <i class="fas fa-search"></i>
                                    Browse All Courses
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}

            </div>
        </section>
        {% endblock %}

        <!-- Content Block for other templates -->
        {% block page_content %}{% endblock %}
        {% endblock %}
    </main>

    <!-- Universal Report Modal -->
    <div class="modal fade" id="reportModal" tabindex="-1" aria-labelledby="reportModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reportModalLabel">
                        <i class="fas fa-exclamation-triangle text-warning"></i> Report Course
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="reportForm">
                        <div class="mb-3">
                            <label for="reportReason" class="form-label">Reason for reporting:</label>
                            <select class="form-select" id="reportReason" required>
                                <option value="">Select a reason</option>
                                <option value="broken_link">Link is broken or not working</option>
                                <option value="paid_course">Course is paid, not free</option>
                                <option value="duplicate_course">Duplicate course</option>
                                <option value="wrong_content">Content doesn't match description</option>
                                <option value="spam">Spam or inappropriate content</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="reportDetails" class="form-label">Additional details (optional):</label>
                            <textarea class="form-control" id="reportDetails" rows="3" placeholder="Please provide more details about the issue..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" onclick="submitReport()">Submit Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Ads -->
    {% if footer_ads %}
    <section class="footer-ads mt-5">
        <div class="container">
            {% for ad in footer_ads %}
            <div class="ad-banner mb-3">
                {% if ad.link_url %}<a href="{{ ad.link_url }}" target="_blank" rel="noopener">{% endif %}
                    {% if ad.image_url %}
                    <img src="{{ ad.image_url }}" alt="{{ ad.title or 'Advertisement' }}" class="ad-image img-fluid">
                    {% else %}
                    <div class="ad-content text-center p-3 bg-light border rounded">
                        <h4>{{ ad.title }}</h4>
                        <p>{{ ad.content }}</p>
                    </div>
                    {% endif %}
                {% if ad.link_url %}</a>{% endif %}
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h5>
                        <img src="{{ url_for('static', filename='owl_course_logo_hd.png') }}" alt="{{ settings.site_title or 'OWL COURSE' }} Logo" width="48" height="48" class="me-2" style="background: transparent; border-radius: 8px;">
                        {{ settings.site_title or 'OWL COURSE' }}
                    </h5>
                    <p>Your intelligent course companion. Discover thousands of high-quality free courses and enhance your skills with {{ settings.site_title or 'OWL COURSE' }}!</p>
                    <div class="social-links">
                        <a href="{% if telegram_settings and telegram_settings.join_channel_username %}https://t.me/{{ telegram_settings.join_channel_username.lstrip('@') }}{% else %}https://t.me/{{ settings.site_title or 'OWL COURSE' }}{% endif %}" class="social-link" target="_blank" aria-label="Telegram">
                            <i class="fab fa-telegram-plane"></i>
                        </a>
                        <a href="https://x.com/course_gem?s=21" class="social-link" target="_blank" aria-label="X">
                            <i class="fab fa-x-twitter"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h5>Quick Links</h5>
                    <p><a href="{{ url_for('index') }}">Browse Courses</a></p>
                    <p><a href="{{ url_for('about') }}">About Us</a></p>
                    <p><a href="{% if telegram_settings and telegram_settings.join_channel_username %}https://t.me/{{ telegram_settings.join_channel_username.lstrip('@') }}{% else %}https://t.me/{{ settings.site_title or 'OWL COURSE' }}{% endif %}" target="_blank">Join Telegram</a></p>
                    <p><a href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">Back to Top</a></p>
                </div>
                
                <div class="footer-section">
                    <h5>Categories</h5>
                    {% if all_categories %}
                        {% for category in all_categories[:6] %}
                        <p><a href="{{ url_for('category_courses', category_name=category) }}">{{ category }}</a></p>
                        {% endfor %}
                    {% else %}
                    <p><a href="{{ url_for('index', category='Development') }}">Development</a></p>
                    <p><a href="{{ url_for('index', category='Business') }}">Business</a></p>
                    <p><a href="{{ url_for('index', category='Design') }}">Design</a></p>
                    <p><a href="{{ url_for('index', category='Marketing') }}">Marketing</a></p>
                    {% endif %}
                </div>
                
                <div class="footer-section">
                    <h5>Support</h5>
                    <p><a href="{% if telegram_settings and telegram_settings.contact_username %}https://t.me/{{ telegram_settings.contact_username.lstrip('@') }}{% else %}https://t.me/{{ settings.site_title or 'OWL COURSE' }}{% endif %}" target="_blank">Contact Us</a></p>
                    <p><a href="{{ url_for('privacy_policy') }}">Privacy Policy</a></p>
                    <p><a href="{{ url_for('terms_of_service') }}">Terms of Service</a></p>
                    <p><a href="{{ url_for('faq') }}">FAQ</a></p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; {{ moment().format('YYYY') if moment else '2024' }} {{ settings.site_title or 'OWL COURSE' }}. All rights reserved. Made with love for learners worldwide.</p>
                <p class="mt-2">
                    <small>
                        Disclaimer: {{ settings.site_title or 'OWL COURSE' }} is not affiliated with Udemy. We simply aggregate free course offers available on the internet.
                        All course content and trademarks belong to their respective owners.
                    </small>
                </p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    <!-- Universal Responsive JS -->
    <script src="{{ url_for('static', filename='js/universal-responsive.js') }}"></script>
    
    {% block extra_js %}{% endblock %}

    <!-- Dropdown Menu Fix Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Hide dropdown when clicking anywhere outside
            document.addEventListener('click', function(event) {
                const dropdowns = document.querySelectorAll('.dropdown-menu.show');
                dropdowns.forEach(dropdown => {
                    const dropdownParent = dropdown.closest('.dropdown');
                    if (!dropdownParent.contains(event.target)) {
                        const dropdownToggle = dropdownParent.querySelector('.dropdown-toggle');
                        if (dropdownToggle) {
                            const bsDropdown = bootstrap.Dropdown.getInstance(dropdownToggle);
                            if (bsDropdown) {
                                bsDropdown.hide();
                            }
                        }
                    }
                });
            });
        });
    </script>

    <!-- Google Translate Script -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'ar,en,es,fr,de,it,pt,ru,zh,ja,ko,hi,tr,nl,pl,sv,da,no,fi',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- Universal Report System JavaScript -->
    <script>
    // Unified function for showing report modal
    function showReportModal(courseId, courseTitle, courseUrl) {
        // Store course data for the modal
        window.currentReportData = {
            course_id: courseId,
            course_title: courseTitle,
            course_url: courseUrl
        };
        
        // Show the report modal
        var reportModal = new bootstrap.Modal(document.getElementById('reportModal'));
        reportModal.show();
    }

    // Submit report function
    // Enhanced Course Cards Report Function
    function openReportModal(courseId, courseTitle) {
        window.currentReportData = {
            course_id: courseId,
            course_title: courseTitle,
            course_url: ''
        };
        
        // Show the modal
        const reportModal = new bootstrap.Modal(document.getElementById('reportModal'));
        reportModal.show();
    }
    
    // Alternative function name for compatibility
    function showReportModal(courseId, courseTitle, courseUrl) {
        window.currentReportData = {
            course_id: courseId,
            course_title: courseTitle,
            course_url: courseUrl || ''
        };
        
        // Show the modal
        const reportModal = new bootstrap.Modal(document.getElementById('reportModal'));
        reportModal.show();
    }
    
    function submitReport() {
        const form = document.getElementById('reportForm');
        const reason = document.getElementById('reportReason').value;
        const details = document.getElementById('reportDetails').value;
        
        if (!reason) {
            alert('Please select a reason for reporting');
            return;
        }
        
        if (!window.currentReportData) {
            alert('Error: Course data not found');
            return;
        }
        
        // Prepare JSON data
        const reportData = {
            course_id: window.currentReportData.course_id,
            course_title: window.currentReportData.course_title,
            course_url: window.currentReportData.course_url,
            reason: reason,
            description: details
        };
        
        // Submit to server
        fetch('/api/report-course', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(reportData)
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('Report submitted successfully. Thank you for helping us improve the platform!');
                // Hide modal
                bootstrap.Modal.getInstance(document.getElementById('reportModal')).hide();
                // Reset form
                form.reset();
            } else {
                alert('Error submitting report: ' + (data.error || data.message || 'Unknown error'));
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error submitting report. Please try again later.');
        });
    }
    </script>

    <!-- Google Analytics Body Code -->
    {% if settings and settings.analytics_body_code %}
        {{ settings.analytics_body_code|safe }}
    {% endif %}
</body>
</html>